<body>
  <div id="title">
    <h2 *ngIf="mode == 'create'">Create Opening</h2>
    <h2 *ngIf="mode == 'edit'">Edit Your Opening</h2>
  </div>

  <div class="create-opening-container">
    <form #editorBaseForm="ngForm" (ngSubmit)="handleSubmit(editorBaseForm)">
      <div class="form-group">
        <label for="name" *ngIf="mode == 'create'">Opening name</label>
        <label for="name" *ngIf="mode == 'edit'">New opening name</label>
        <input
          type="text"
          id="name"
          name="name"
          ngModel=" {{ mode == 'edit' ? opening?.name : '' }}"
          #nameInput="ngModel"
        />
      </div>

      <div class="form-group">
        <label for="description" *ngIf="mode == 'create'"
          >Describe the strategy behind your opening
        </label>
        <label for="description" *ngIf="mode == 'edit'"
          >Update the opening's description
        </label>
        <textarea
          id="description"
          name="description"
          ngModel=" {{ mode == 'edit' ? opening?.description : '' }}"
          #descriptionInput="ngModel"
        ></textarea>
      </div>

      <div class="form-group">
        <label for="fen">Forsyth-Edwards notation (FEN)</label>
        <input
          type="text"
          id="fen"
          name="fen"
          ngModel=" {{ mode == 'edit' ? opening?.fen : '' }}"
          #fenInput="ngModel"
        />
        <button type="button" (click)="showPositionOnBoard(fenInput.value)">
          Display FEN Position
        </button>
      </div>

      <div class="form-group">
        <mat-form-field>
          <mat-label>Difficulty Level</mat-label>
          <mat-select
            name="level"
            ngModel="{{ mode == 'edit' ? opening?.level : '' }}"
            #difficultyInput="ngModel"
          >
            <mat-option *ngFor="let level of levels" [value]="level">
              {{ level }}
            </mat-option>
          </mat-select>
        </mat-form-field>
      </div>

      <button type="submit" class="submit-button" *ngIf="mode == 'create'">
        Create
      </button>
      <button type="submit" class="submit-button" *ngIf="mode == 'edit'">
        Update
      </button>
    </form>

    <div class="chess-board-container" *ngIf="fenValue">
      <app-chessboard [size]="500" [fen]="fenValue"></app-chessboard>
    </div>

    <div class="chess-board-container" *ngIf="opening && mode == 'edit' && !fenValue">
      <app-chessboard [size]="500" [fen]="opening.fen"></app-chessboard>
    </div>
  </div>
</body>
