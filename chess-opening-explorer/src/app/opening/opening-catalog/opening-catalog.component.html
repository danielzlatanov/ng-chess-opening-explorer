<div class="openings-catalog">
  <ng-container *ngIf="filteredOpenings && filteredOpenings.length > 0">
    <div class="container">
      <h2 class="title">Browse Catalog</h2>
      <mat-slide-toggle
        [checked]="isDynamicSearch"
        (change)="toggleSearchMode()"
      >
        <span
          >{{ isDynamicSearch == true ? "Dynamic" : "Manual" }} Search
        </span>
      </mat-slide-toggle>
      <div class="search-bar">
        <input
          #searchInput
          type="text"
          [(ngModel)]="searchQuery"
          [placeholder]="
            isDynamicSearch == true ? 'Search as you type' : 'Search openings'
          "
          (keydown.enter)="searchHandler()"
          (input)="isDynamicSearch && searchHandler()"
        />
        <div
          class="tooltip-container"
          matTooltip="Press '/' to focus the search field"
        >
          <div class="slash-indicator" *ngIf="isDynamicSearch">/</div>
        </div>
        <button
          type="button"
          (click)="searchHandler()"
          *ngIf="!isDynamicSearch"
        >
          Search
        </button>
      </div>
    </div>
  </ng-container>

  <div class="openings-grid" *ngIf="filteredOpenings">
    <div
      class="opening-card"
      *ngFor="let opening of filteredOpenings; let i = index"
    >
      <div class="opening-image">
        <img [src]="randomChessPieceImgs[i]" alt="Opening {{ i + 1 }}" />
      </div>

      <div class="opening-details">
        <h2 class="opening-title">
          {{ opening.name | slice : 0 : 16 }}
          {{ opening.name.length > 16 ? "..." : "" }}
        </h2>
        <p class="opening-description">
          {{ opening.description | slice : 0 : 20 }}
          {{ opening.description.length > 20 ? "..." : "" }}
        </p>
        <a
          mat-stroked-button
          class="view-details"
          routerLink="/openings/details/{{ opening.id }}"
          >Details</a
        >
      </div>
    </div>
  </div>

  <div class="no-results-message" *ngIf="showNoResultsMsg">
    <p class="message">
      No matching openings found. Please try a different search query.
    </p>
  </div>

  <div
    class="no-openings-message"
    *ngIf="showNoOpeningsMsg"
  >
    <app-no-openings-msg
      [message]="
        'No chess openings available at the moment. We\'re constantly updating, so please come back later.'
      "
      [imageUrl]="'/assets/images/coming-soon.png'"
    ></app-no-openings-msg>
  </div>
</div>
